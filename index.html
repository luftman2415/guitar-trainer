<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guitar Worship Trainer</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="logo.svg" type="image/svg+xml">
    <link rel="preload" href="fonts/Montserrat-Regular.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="fonts/Montserrat-Bold.ttf" as="font" type="font/ttf" crossorigin>
</head>

<body data-theme="light">
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><path d="M480.5 176.6c-55.3 2.6-112.7 12.2-152.6 25.4-75.3 25-115.1 69.5-124 138.5-1.6 13.2-1.4 45.5.6 62 3.3 28.1 8 47.4 21.5 87 15 44.3 49.2 115.2 78.8 163.5 16.7 27.3 46.8 70.3 69.6 99.5 35.2 45.1 66.5 74.8 92.4 87.9 16.9 8.5 27 11 44.2 11 11.5 0 15-.4 23.5-2.7 26.6-7.3 52.2-25.1 81.4-56.7 19.7-21.4 31.1-35.6 62.2-77.5 49.5-66.8 99.3-162.1 123.8-236.8 11.2-34.2 15.6-53.8 18.2-81.2 1.4-15.5.6-52.4-1.5-64-8.7-48.7-33.7-84.6-76.6-109.7-38.4-22.5-98.8-37.8-174.5-44.3-17.4-1.5-70.7-2.6-87-1.9zm258.6 161.6 15.9 10.2-4.2 7.6c-14.8 27.2-38.8 60.2-65.7 90.3l-12.8 14.3 8.9 11c16.8 20.7 29.6 39.9 46.7 70.1l9.2 16.2-8.7 12.3c-4.8 6.8-10.5 14.7-12.7 17.7l-3.9 5.3-7.8-15c-14.1-27.1-30.3-53-48.8-77.9l-10.6-14.1-8 7.2c-40.8 36.1-86.4 59.4-133.3 67.8-18.3 3.2-50.3 3.3-67.8 0-24.1-4.5-46.1-12.1-66.4-22.8-36.3-19.2-64.5-44.3-95.1-84.5l-7.9-10.3 2.6-3.6c39.8-53.6 89.2-88.5 141-99.4 52.1-10.9 105.9-2.3 153.9 24.7 25.3 14.2 45.1 29.1 71.6 53.8l11.6 10.9 9.5-10.2c23.7-25.7 40.1-47.7 57.7-77.7 4.5-7.7 8.5-14.1 8.7-14.1.3 0 7.7 4.6 16.4 10.2z"/><path d="M424.6 379.1c-28 4.9-56.6 18.3-80.3 37.5-8.7 7.1-29.3 27.7-29.3 29.3 0 1.3 25.8 26.1 34.3 33 19.1 15.5 43.5 29.3 63.6 36 47.9 15.9 101.3 9.8 149.3-17 16.7-9.4 38.7-25.1 52.3-37.3l4-3.6-8.5-8.1c-42.3-40.4-85.3-63.8-129.4-70.4-14.8-2.2-42-1.9-56 .6z"/></svg>
                <span>Guitar Worship Trainer</span>
            </div>
            <div id="globalSearchInput" class="styled-input" style="display:none;">
                <input type="text" placeholder="üîç Buscar canciones, setlists, rutinas..." id="globalSearchInputField">
            </div>
            <div class="theme-switcher">
                <button class="theme-btn button" data-theme="light" title="Tema Claro">‚òÄÔ∏è</button>
                <button class="theme-btn button" data-theme="dark" title="Tema Oscuro">üåô</button>
                <button class="theme-btn button" data-theme="ocean" title="Tema Oc√©ano">üåä</button>
                <button class="theme-btn button" data-theme="forest" title="Tema Bosque">üå≤</button>
            </div>
            <button id="keyboardShortcutsBtn" class="button" title="Atajos de teclado">‚å®Ô∏è</button>
        </div>
    </header>

    <nav class="nav">
        <div class="nav-content">
            <button class="nav-btn button active" data-section="inicio">üè† Inicio</button>
            <button class="nav-btn button" data-section="tuner">üé§ Afinador</button>
            <button class="nav-btn button" data-section="songs">üéµ Canciones</button>
            <button class="nav-btn button" data-section="setlists">üìã Setlists</button>
            <button class="nav-btn button" data-section="metronome">ü•Å Metr√≥nomo</button>
            <button class="nav-btn button" data-section="practice">üóìÔ∏è Pr√°ctica</button>
            <button class="nav-btn button" data-section="scales">üé∏ Escalas</button>
            <button class="nav-btn button" data-section="ear-trainer">üëÇ O√≠do</button>
            <button class="nav-btn button" data-section="circle-of-fifths">üéº C√≠rculo de Quintas</button>
            <button class="nav-btn button" data-section="analyzer">üîç Analizador</button>
            <button class="nav-btn button" data-section="recorder">üéôÔ∏è Grabadora</button>
        </div>
    </nav>

    <main class="main">
        <section id="inicio" class="section active">
            <div class="welcome"><h1>Bienvenido a Guitar Worship Trainer</h1><p>Tu herramienta todo-en-uno para mejorar tus habilidades.</p></div>
            
            <!-- Progress Cards Section -->
            <div class="progress-cards-section">
                <h2>üìä Tu Progreso</h2>
                <div class="progress-cards-grid">
                    <div class="progress-card">
                        <div class="progress-card-icon">‚è±Ô∏è</div>
                        <div class="progress-card-content">
                            <h3>Tiempo Total</h3>
                            <p id="homeTotalTime">0h 0m</p>
                        </div>
                    </div>
                    <div class="progress-card">
                        <div class="progress-card-icon">üìÖ</div>
                        <div class="progress-card-content">
                            <h3>Sesiones</h3>
                            <p id="homeTotalSessions">0</p>
                        </div>
                    </div>
                    <div class="progress-card">
                        <div class="progress-card-icon">üî•</div>
                        <div class="progress-card-content">
                            <h3>Racha Actual</h3>
                            <p id="homeCurrentStreak">0 d√≠as</p>
                        </div>
                    </div>
                    <div class="progress-card">
                        <div class="progress-card-icon">üéµ</div>
                        <div class="progress-card-content">
                            <h3>Canciones</h3>
                            <p id="homeTotalSongs">0</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="cards-grid">
                <div class="card" data-section="tuner"><div class="card-icon">üé§</div><h3>Afinador</h3><p>Afina tu instrumento con precisi√≥n.</p></div>
                <div class="card" data-section="songs"><div class="card-icon">üéµ</div><h3>Repertorio</h3><p>Gestiona tu lista de canciones.</p></div>
                <div class="card" data-section="setlists"><div class="card-icon">üìã</div><h3>Setlists</h3><p>Organiza tus servicios y ensaya.</p></div>
                <div class="card" data-section="metronome"><div class="card-icon">ü•Å</div><h3>Metr√≥nomo</h3><p>Practica con comp√°s y subdivisiones.</p></div>
                <div class="card" data-section="practice"><div class="card-icon">üóìÔ∏è</div><h3>Plan de Pr√°ctica</h3><p>Crea rutinas de estudio inteligentes.</p></div>
                <div class="card" data-section="scales"><div class="card-icon">üé∏</div><h3>Visualizador de Escalas</h3><p>Aprende cualquier escala en el diapas√≥n.</p></div>
                <div class="card" data-section="ear-trainer"><div class="card-icon">üëÇ</div><h3>Entrenador de O√≠do</h3><p>Desarrolla tu o√≠do musical.</p></div>
                <div class="card" data-section="circle-of-fifths"><div class="card-icon">üéº</div><h3>C√≠rculo de Quintas</h3><p>Explora relaciones arm√≥nicas.</p></div>
                <div class="card" data-section="analyzer"><div class="card-icon">üîç</div><h3>An√°lisis Musical</h3><p>Analiza progresiones arm√≥nicas.</p></div>
                <div class="card" data-section="recorder"><div class="card-icon">üéôÔ∏è</div><h3>Grabadora de Ideas</h3><p>Captura melod√≠as o riffs.</p></div>
            </div>
        </section>

        <section id="tuner" class="section">
             <div class="tuner-container"><div class="note-display"><span id="tunerNote">--</span><span id="tunerSharp" class="sharp-flat">‚ôØ</span><span id="tunerFlat" class="sharp-flat">‚ô≠</span></div><div class="tuner-meter"><div class="tuner-needle" id="tunerNeedle"></div><div class="tuner-line good"></div><div class="tuner-line low"></div><div class="tuner-line high"></div></div><div class="cents-display" id="centsDisplay">- cents</div><button id="tunerStartBtn" class="button btn-primary">Activar Afinador</button><p id="tunerStatus" class="tuner-status">Se necesita acceso al micr√≥fono.</p></div>
        </section>

        <section id="metronome" class="section">
            <div class="metronome-container">
                <div class="bpm-display" id="bpmDisplay">120</div>
                <div class="visual-indicator" id="visualIndicator"></div>
                <div class="control-group">
                    <label for="bpmSlider">Tempo (BPM)</label>
                    <input type="range" id="bpmSlider" class="bpm-slider" min="40" max="240" value="120" data-setting="bpm">
                </div>
                <div class="metronome-grid">
                    <div class="control-group">
                        <label for="timeSignature">Comp√°s</label>
                        <select id="timeSignature" class="styled-select" data-setting="timeSignature">
                            <option value="4/4">4/4</option>
                            <option value="3/4">3/4</option>
                            <option value="2/4">2/4</option>
                            <option value="6/8">6/8</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="subdivision">Subdivisi√≥n (Rasgueo)</label>
                        <select id="subdivision" class="styled-select" data-setting="subdivision">
                            <option value="1">Negra (1/4)</option>
                            <option value="2">Corchea (1/8)</option>
                            <option value="3">Tresillo</option>
                            <option value="4">Semicorchea (1/16)</option>
                        </select>
                    </div>
                </div>
                <div class="metronome-grid">
                    <div class="control-group">
                        <label for="soundSelect">Sonido del Clic</label>
                        <select id="soundSelect" class="styled-select" data-setting="sound">
                            <option value="square">Digital</option>
                            <option value="sine">Suave</option>
                            <option value="triangle">Percusivo</option>
                        </select>
                    </div>
                    <div class="control-group accent-control">
                        <label for="accentToggle" class="checkbox-label">
                            <input type="checkbox" id="accentToggle" checked data-setting="accent"> Acento
                        </label>
                    </div>
                </div>
                <div class="control-group-buttons">
                    <button id="playBtn" class="play-btn button">‚ñ∂Ô∏è Iniciar</button>
                    <button id="tapTempoBtn" class="button">Tap Tempo</button>
                </div>
                
                <!-- Speed Trainer Section -->
                <div class="speed-trainer-section">
                    <h3>üèÉ Entrenador de Velocidad</h3>
                    <div class="speed-trainer-controls">
                        <div class="control-group">
                            <label for="startBpm">BPM Inicial</label>
                            <input type="number" id="startBpm" class="styled-input" value="80" min="40" max="200">
                        </div>
                        <div class="control-group">
                            <label for="endBpm">BPM Final</label>
                            <input type="number" id="endBpm" class="styled-input" value="120" min="40" max="240">
                        </div>
                        <div class="control-group">
                            <label for="increment">Incremento</label>
                            <input type="number" id="increment" class="styled-input" value="5" min="1" max="20">
                        </div>
                        <div class="control-group">
                            <label for="stepDuration">Duraci√≥n por Paso (min)</label>
                            <input type="number" id="stepDuration" class="styled-input" value="2" min="1" max="10">
                        </div>
                    </div>
                    <div class="speed-trainer-status" id="speedTrainerStatus">
                        <span id="speedTrainerInfo">Listo para empezar</span>
                        <div class="speed-trainer-buttons">
                            <button id="startSpeedTrainerBtn" class="button btn-primary">‚ñ∂Ô∏è Iniciar</button>
                            <button id="stopSpeedTrainerBtn" class="button btn-danger" style="display:none;">‚èπÔ∏è Detener</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="speedTrainerDisplay" class="speed-trainer-display"></div>
        </section>

        <section id="songs" class="section">
            <div class="manager-header">
                <h1>üéµ Repertorio de Canciones</h1>
                <button class="btn-primary button" id="addSongBtn">‚ûï A√±adir Canci√≥n</button>
            </div>
            
            <div class="song-filters">
                <div class="filter-group">
                    <label for="songTagFilter">Filtrar por Tag:</label>
                    <select id="songTagFilter" class="styled-select">
                        <option value="">Todos los tags</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="songArchiveFilter" class="checkbox-label">
                        <input type="checkbox" id="songArchiveFilter"> Mostrar archivadas
                    </label>
                </div>
            </div>
            
            <div id="songListContainer"></div>
        </section>

        <section id="setlists" class="section">
            <div class="manager-header">
                <h1>üìã Gestor de Setlists</h1>
                <button class="btn-primary button" id="createSetlistBtn">‚ú® Crear Nuevo Setlist</button>
            </div>
            <div id="setlistListContainer"></div>
        </section>
        
        <section id="practice" class="section">
            <div class="manager-header">
                <h1>üóìÔ∏è Planificador de Pr√°ctica</h1>
                <button class="btn-primary button" id="createRoutineBtn">üí™ Crear Nueva Rutina</button>
            </div>
            <div id="routineListContainer"></div>
            
            <!-- Practice Log Section -->
            <div class="manager-header" style="margin-top: 3rem;">
                <h1>üìä Registro de Progreso</h1>
                <button class="btn-primary button" id="addPracticeEntryBtn">‚ûï A√±adir Entrada</button>
            </div>
            
            <div class="progress-stats">
                <div class="stat-card">
                    <h3>Tiempo Total</h3>
                    <p id="totalPracticeTime">0h 0m</p>
                </div>
                <div class="stat-card">
                    <h3>Sesiones</h3>
                    <p id="totalSessions">0</p>
                </div>
                <div class="stat-card">
                    <h3>Promedio/Sesi√≥n</h3>
                    <p id="avgSessionTime">0m</p>
                </div>
                <div class="stat-card">
                    <h3>Racha Actual</h3>
                    <p id="currentStreak">0 d√≠as</p>
                </div>
            </div>
            
            <div class="log-filters">
                <select id="logFilterType" class="styled-select">
                    <option value="all">Todos los tipos</option>
                    <option value="routine">Rutina</option>
                    <option value="speed_trainer">Entrenador de Velocidad</option>
                    <option value="song">Canci√≥n</option>
                    <option value="custom">Personalizado</option>
                </select>
                <input type="date" id="logFilterDate" class="styled-input">
            </div>
            
            <div id="practiceLogList"></div>
        </section>

        <section id="scales" class="section">
            <h1 style="text-align:center;">Visualizador de Escalas 2.0</h1>
            <div class="scales-controls">
                <select id="rootNoteSelect" class="styled-select">
                    <option value="C">C</option>
                    <option value="C#">C# / Db</option>
                    <option value="D">D</option>
                    <option value="D#">D# / Eb</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                    <option value="F#">F# / Gb</option>
                    <option value="G">G</option>
                    <option value="G#">G# / Ab</option>
                    <option value="A">A</option>
                    <option value="A#">A# / Bb</option>
                    <option value="B">B</option>
                </select>
                <select id="scaleTypeSelect" class="styled-select">
                    <option value="major">Mayor</option>
                    <option value="minor">menor Natural</option>
                    <option value="pentatonic-major">Pentat√≥nica Mayor</option>
                    <option value="pentatonic-minor">Pentat√≥nica menor</option>
                    <option value="harmonic-minor">menor Arm√≥nica</option>
                    <option value="mixolydian">Mixolidio</option>
                    <option value="dorian">D√≥rico</option>
                </select>
                <select id="tuningSelect" class="styled-select">
                    <option value="standard">Est√°ndar (EADGBE)</option>
                    <option value="drop-d">Drop D (DADGBE)</option>
                    <option value="open-g">Open G (DGDGBD)</option>
                    <option value="open-d">Open D (DADF#AD)</option>
                    <option value="dadgad">DADGAD</option>
                    <option value="half-step-down">Medio Tono Abajo (EbAbDbGbBbEb)</option>
                    <option value="full-step-down">Tono Abajo (DGCFAD)</option>
                </select>
            </div>
            <div id="scaleViewSwitcher" class="scales-view-switcher">
                <label><input type="radio" name="scale_view" value="scale" checked> Escala</label>
                <label><input type="radio" name="scale_view" value="triads"> Tr√≠adas</label>
                <label><input type="radio" name="scale_view" value="arpeggios"> Arpegios</label>
            </div>
            <div id="fretboardVisualizer"></div>
            <div id="harmonicFieldContainer"></div>
        </section>

        <section id="ear-trainer" class="section">
            <div class="ear-trainer-container">
                <h1>Entrenador de O√≠do</h1>
                <p id="earTrainerStatus">Pulsa "Tocar Nota" para empezar.</p>
                <div id="earTrainerScore">Aciertos: 0 / Intentos: 0</div>
                
                <div class="ear-trainer-mode-selector">
                    <button class="mode-btn active" data-mode="notes">Notas</button>
                    <button class="mode-btn" data-mode="intervals">Intervalos</button>
                    <button class="mode-btn" data-mode="chords">Acordes</button>
                </div>
                
                <button id="playRandomNoteBtn" class="btn-primary button">‚ñ∂Ô∏è Tocar</button>
                
                <div class="ear-trainer-options">
                    <div id="noteOptions" class="note-options"></div>
                    <div id="intervalOptions" class="interval-options" style="display:none;"></div>
                    <div id="chordOptions" class="chord-options" style="display:none;"></div>
                </div>
                
                <div id="earTrainerFretboard"></div>
            </div>
        </section>

        <section id="circle-of-fifths" class="section">
            <div class="circle-of-fifths-container">
                <h1 style="text-align:center;">C√≠rculo de Quintas Interactivo</h1>
                <div class="circle-controls">
                    <button id="resetCircleBtn" class="button">üîÑ Resetear</button>
                    <button id="showAllChordsBtn" class="button">üéµ Ver Todos los Acordes</button>
                </div>
                <div class="circle-main">
                    <div class="circle-svg-container">
                        <svg id="circleSvg" class="circle-svg" viewBox="0 0 600 600">
                            <!-- El SVG se generar√° din√°micamente -->
                        </svg>
                    </div>
                    <div class="circle-info-panel">
                        <div id="keyInfo" class="key-info">
                            <h3>Selecciona una tonalidad</h3>
                            <p>Haz clic en cualquier nota del c√≠rculo para ver su informaci√≥n arm√≥nica</p>
                        </div>
                        <div id="chordInfo" class="chord-info" style="display:none;">
                            <h3>Acordes Diat√≥nicos</h3>
                            <div id="diatonicChords"></div>
                        </div>
                        <div id="scaleInfo" class="scale-info" style="display:none;">
                            <h3>Escalas Relacionadas</h3>
                            <div id="relatedScales"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="analyzer" class="section">
            <div class="analyzer-container">
                <h1>Analizador de Progresiones</h1>
                <p>Escribe acordes y descubre su tonalidad y funci√≥n arm√≥nica.</p>
                <textarea id="progressionInput" placeholder="Ej: C#m | A | E | B"></textarea>
                <button id="analyzeProgressionBtn" class="btn-primary button">Analizar</button>
                <div id="progressionResult" class="analyzer-result"></div>
            </div>
        </section>
        
        <section id="recorder" class="section">
            <div class="idea-recorder">
                <h2>üéôÔ∏è Grabadora de Ideas</h2>
                <button id="recBtn" class="rec-btn" aria-label="Iniciar grabaci√≥n">‚óè Grabar</button>
                <span id="recTime" class="rec-time">00:00</span>
                <div id="recStatus" class="rec-status">Pulsa el bot√≥n para empezar a grabar</div>
                <ul id="recList" class="rec-list"></ul>
            </div>
        </section>
    </main>

    <footer>
        <p>Copyright ¬© <span id="copyright-year"></span> LUFTMANDMAURICIO</p>
    </footer>

    <!-- MODALS -->
    <div id="songModalOverlay" class="modal-overlay" style="display:none;"><div class="modal"><button class="close-modal" id="closeSongModalBtn" title="Cerrar">√ó</button><h2 id="songModalTitle">Nueva Canci√≥n</h2><form id="songForm"><label for="songTitleInput">T√≠tulo</label><input type="text" id="songTitleInput" name="title" required class="styled-input"><label for="songArtistInput">Artista (Opcional)</label><input type="text" id="songArtistInput" name="artist" class="styled-input"><label for="songDefaultKeyInput">Tonalidad Original</label><input type="text" id="songDefaultKeyInput" name="defaultKey" required class="styled-input"><label for="songDefaultBpmInput">BPM Original</label><input type="number" id="songDefaultBpmInput" name="defaultBpm" min="40" max="240" class="styled-input"><label for="songTagsInput">Tags (Opcional)</label><input type="text" id="songTagsInput" name="tags" placeholder="Ej: adoraci√≥n, lento, favorito" class="styled-input"><label for="songArchivedInput" class="checkbox-label"><input type="checkbox" id="songArchivedInput" name="archived"> Archivar canci√≥n</label><label for="songLyricsInput">Letra y Acordes</label><textarea id="songLyricsInput" name="lyrics" required placeholder="[Verse 1]
G              C
Sublime gracia..."></textarea><div class="modal-actions"><button type="button" class="btn-cancel button" id="cancelSongModalBtn">Cancelar</button><button type="submit" class="btn-save button">Guardar</button></div></form></div></div>
    <div id="setlistModalOverlay" class="modal-overlay" style="display:none;"><div class="modal"><button class="close-modal" id="closeSetlistModalBtn" title="Cerrar">√ó</button><h2 id="setlistModalTitle">Nuevo Setlist</h2><form id="setlistForm"><label for="setlistNameInput">Nombre del Setlist</label><input type="text" id="setlistNameInput" name="name" required placeholder="Ej: Servicio Domingo Ma√±ana" class="styled-input"><div class="modal-actions"><button type="button" class="btn-cancel button" id="cancelSetlistModalBtn">Cancelar</button><button type="submit" class="btn-save button">Guardar</button></div></form></div></div>
    <div id="addSongToSetlistModalOverlay" class="modal-overlay" style="display:none;"><div class="modal"><button class="close-modal" id="closeAddSongToSetlistModalBtn" title="Cerrar">√ó</button><h2>A√±adir Canci√≥n al Setlist</h2><form id="addSongToSetlistForm"><label for="songSearchInput">Buscar canci√≥n</label><input type="text" id="songSearchInput" placeholder="Escribe para buscar..." class="styled-input"><label for="songSelectForSetlist">Canci√≥n</label><select id="songSelectForSetlist" class="styled-select" required></select><div class="form-grid"><div><label for="setlistItemKey">Tonalidad</label><input type="text" id="setlistItemKey" required class="styled-input"></div><div><label for="setlistItemBpm">BPM</label><input type="number" id="setlistItemBpm" min="40" max="240" required class="styled-input"></div></div><label for="setlistItemNotes">Notas para la performance</label><textarea id="setlistItemNotes" placeholder="Ej: Empezar solo con piano..."></textarea><div class="modal-actions"><button type="submit" class="btn-save button">A√±adir</button></div></form></div></div>
    <div id="routineModalOverlay" class="modal-overlay" style="display:none;"><div class="modal"><button class="close-modal" id="closeRoutineModalBtn" title="Cerrar">√ó</button><h2 id="routineModalTitle">Nueva Rutina</h2><form id="routineForm"><label for="routineNameInput">Nombre de la Rutina</label><input type="text" id="routineNameInput" name="name" required placeholder="Ej: Pr√°ctica Diaria" class="styled-input"><div class="modal-actions"><button type="button" class="btn-cancel button" id="cancelRoutineModalBtn">Cancelar</button><button type="submit" class="btn-save button">Guardar</button></div></form></div></div>
    <div id="routineItemModalOverlay" class="modal-overlay" style="display:none;"><div class="modal"><button class="close-modal" id="closeRoutineItemModalBtn" title="Cerrar">√ó</button><h2>A√±adir Tarea a la Rutina</h2><form id="routineItemForm"><div class="form-grid"><div><label for="routineItemDurationInput">Duraci√≥n (min)</label><input type="number" id="routineItemDurationInput" name="duration" min="1" required class="styled-input"></div><div><label for="routineItemTypeSelect">Tipo de Tarea</label><select id="routineItemTypeSelect" name="type" class="styled-select" required><option value="" selected disabled>-- Elige un tipo --</option><option value="scale">Escala</option><option value="song">Canci√≥n</option><option value="custom">Personalizado</option></select></div></div><div id="routineItemParamsContainer"></div><div class="modal-actions"><button type="submit" class="btn-save button">A√±adir Tarea</button></div></form></div></div>
    <div id="practiceEntryModalOverlay" class="modal-overlay" style="display:none;"><div class="modal"><button class="close-modal" id="closePracticeEntryModalBtn" title="Cerrar">√ó</button><h2>A√±adir Entrada de Pr√°ctica</h2><form id="practiceEntryForm"><div class="form-grid"><div><label for="entryType">Tipo de Actividad</label><select id="entryType" name="type" class="styled-select" required><option value="" selected disabled>-- Elige un tipo --</option><option value="routine">Rutina</option><option value="speed_trainer">Entrenador de Velocidad</option><option value="song">Canci√≥n</option><option value="custom">Personalizado</option></select></div><div><label for="entryDuration">Duraci√≥n (minutos)</label><input type="number" id="entryDuration" name="duration" min="1" max="480" required class="styled-input"></div></div><div id="entryParamsContainer"></div><label for="entryNotes">Notas (Opcional)</label><textarea id="entryNotes" name="notes" placeholder="Describe qu√© practicaste..."></textarea><label for="entryAreasToImprove">√Åreas a Mejorar (Opcional)</label><textarea id="entryAreasToImprove" name="areasToImprove" placeholder="Qu√© necesitas trabajar m√°s..."></textarea><div class="modal-actions"><button type="button" class="btn-cancel button" id="cancelPracticeEntryModalBtn">Cancelar</button><button type="submit" class="btn-save button">Guardar</button></div></form></div></div>
    <div id="confirmModalOverlay" class="modal-overlay" style="display:none;"><div class="modal confirm-modal"><h2 id="confirmModalTitle">Confirmar Acci√≥n</h2><p id="confirmModalMessage">¬øEst√°s seguro?</p><div class="modal-actions"><button class="button btn-cancel" id="confirmModalCancel">Cancelar</button><button class="button btn-danger" id="confirmModalConfirm">Confirmar</button></div></div></div>
    <div id="keyboardShortcutsModalOverlay" class="modal-overlay" style="display:none;"><div class="modal"><button class="close-modal" id="closeKeyboardShortcutsModalBtn" title="Cerrar">√ó</button><h2>‚å®Ô∏è Atajos de Teclado</h2><div class="shortcuts-grid"><div class="shortcut-group"><h3>Navegaci√≥n</h3><div class="shortcut-item"><span class="key">H</span><span class="description">Ir a Inicio</span></div><div class="shortcut-item"><span class="key">S</span><span class="description">Abrir Canciones</span></div><div class="shortcut-item"><span class="key">M</span><span class="description">Abrir Metr√≥nomo</span></div><div class="shortcut-item"><span class="key">T</span><span class="description">Abrir Afinador</span></div><div class="shortcut-item"><span class="key">E</span><span class="description">Entrenador de O√≠do</span></div><div class="shortcut-item"><span class="key">C</span><span class="description">C√≠rculo de Quintas</span></div></div><div class="shortcut-group"><h3>Controles</h3><div class="shortcut-item"><span class="key">Espacio</span><span class="description">Iniciar/Pausar Metr√≥nomo</span></div><div class="shortcut-item"><span class="key">‚Üê ‚Üí</span><span class="description">Navegar en Performance</span></div><div class="shortcut-item"><span class="key">ESC</span><span class="description">Salir/Cerrar</span></div></div></div><div class="modal-actions"><button class="button btn-cancel" id="closeKeyboardShortcutsBtn">Cerrar</button></div></div></div>
    <div id="pdfExportOptionsModalOverlay" class="modal-overlay" style="display:none;"><div class="modal"><button class="close-modal" id="closePdfExportOptionsModalBtn" title="Cerrar">√ó</button><h2>üìÑ Opciones de Exportaci√≥n PDF</h2><form id="pdfExportOptionsForm"><div class="export-options"><div class="option-group"><h3>Contenido a Incluir</h3><label class="checkbox-label"><input type="checkbox" id="includeNotes" name="includeNotes" checked> Incluir notas de performance</label><label class="checkbox-label"><input type="checkbox" id="includeArtist" name="includeArtist" checked> Incluir artista</label><label class="checkbox-label"><input type="checkbox" id="includeChords" name="includeChords" checked> Incluir formato de acordes</label><label class="checkbox-label"><input type="checkbox" id="includeTags" name="includeTags"> Incluir tags</label></div><div class="option-group"><h3>Formato</h3><label class="checkbox-label"><input type="checkbox" id="compactFormat" name="compactFormat"> Formato compacto (menos espacio)</label><label class="checkbox-label"><input type="checkbox" id="includePageNumbers" name="includePageNumbers" checked> Incluir n√∫meros de p√°gina</label></div></div><div class="modal-actions"><button type="button" class="btn-cancel button" id="cancelPdfExportBtn">Cancelar</button><button type="submit" class="btn-save button">Exportar PDF</button></div></form></div></div>
    <div id="performance-mode" class="hidden"><div class="performance-header"><h2 id="perf-song-title"></h2><button id="exit-performance-btn" class="button">Salir</button></div><div class="performance-details"><div class="perf-detail-box"><span class="label">TONALIDAD</span><span id="perf-key" class="value">G</span></div><div class="perf-detail-box"><span class="label">BPM</span><span id="perf-bpm" class="value">120</span></div></div><div class="performance-notes"><h3>Notas:</h3><p id="perf-notes"></p></div><div class="performance-nav"><button id="perf-prev-btn" class="button nav-performance">‚óÄ Anterior</button><button id="perf-next-btn" class="button nav-performance">Siguiente ‚ñ∂</button></div></div>

    <!-- SCRIPTS -->
    <script src="lib/Sortable.min.js"></script>
    <script src="lib/lodash.min.js"></script>
    <script src="main.js" defer></script>

</body>
</html>